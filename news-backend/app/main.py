from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
import feedparser
import requests
from datetime import datetime, timedelta
import random
from typing import List, Dict
from pydantic import BaseModel

app = FastAPI()

# Disable CORS. Do not remove this for full-stack development.
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # Allows all origins
    allow_credentials=True,
    allow_methods=["*"],  # Allows all methods
    allow_headers=["*"],  # Allows all headers
)

class NewsItem(BaseModel):
    title: str
    summary: str
    published: str
    source: str
    url: str
    image_url: str
    category: str = "経済"

class NewsResponse(BaseModel):
    success: bool
    data: List[NewsItem]
    count: int
    generated_at: str
    overall_summary: str

def get_news_related_image(title: str) -> str:
    """Get a relevant illustration/image URL based on news title with enhanced keyword matching"""
    title_lower = title.lower()
    
    if any(keyword in title_lower for keyword in ['m谷']):
        if any(keyword in title_lower for keyword in ['ゴシップ', '口論', '騒動', '疑惑', '小競り合い', '問題', '合コン', '不倫', 'スキャンダル']):
            return "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400&h=300&fit=crop"  # 議論・問題
        elif any(keyword in title_lower for keyword in ['表彰', '振興', '地域', '活動', '貢献', '成果', '新薬', '開発', 'プロジェクト', 'エキスパート']):
            return "https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=400&h=300&fit=crop"  # 表彰・成功
        elif any(keyword in title_lower for keyword in ['プロレス', '観戦', 'スポーツ', 'イベント', 'ハンドボール']):
            return "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop"  # スポーツ
        else:
            return "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop"  # ビジネスマン
    
    elif any(keyword in title_lower for keyword in ['中国', '日本産', '水産物', 'マグロ', 'ホタテ', '輸入', '許可', '449種類']):
        return "https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=400&h=300&fit=crop"  # 魚・水産物
    
    elif any(keyword in title_lower for keyword in ['広島', '湯崎', 'カザフスタン', '核実験場', '跡地', '訪問', '平和', '核']):
        return "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop"  # 平和記念・核関連
    
    elif any(keyword in title_lower for keyword in ['タイ', '僧侶', '性的関係', '金銭', '脅し', '社会衝撃', '宗教', '寺院']):
        return "https://images.unsplash.com/photo-1563789031959-4c02bcb41319?w=400&h=300&fit=crop"  # 寺院・宗教
    
    elif any(keyword in title_lower for keyword in ['プロ野球', '日本ハム', '西武', '連勝', '首位', 'パ・リーグ', '野球']):
        return "https://images.unsplash.com/photo-1566577739112-5180d4bf9390?w=400&h=300&fit=crop"  # 野球
    
    elif any(keyword in title_lower for keyword in ['横綱', '大の里', '相撲', '名古屋場所', '1敗', '力士']):
        return "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400&h=300&fit=crop"  # 相撲
    
    elif any(keyword in title_lower for keyword in ['スポーツ', '試合', '選手', '競技', '勝利', '敗北', '大会', 'オリンピック']):
        return "https://images.unsplash.com/photo-1461896836934-ffe607ba8211?w=400&h=300&fit=crop"  # スポーツ一般
    
    elif any(keyword in title_lower for keyword in ['外交', '国際', '大使', '首脳', '会談', '条約', '貿易摩擦']):
        return "https://images.unsplash.com/photo-1521791136064-7986c2920216?w=400&h=300&fit=crop"  # 外交
    
    elif any(keyword in title_lower for keyword in ['政治', '政府', '首相', '大臣', '国会', '選挙', '政策', '法案', '議員']):
        return "https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=400&h=300&fit=crop"  # 政治
    
    elif any(keyword in title_lower for keyword in ['事件', '事故', '犯罪', '逮捕', '裁判', '判決', '社会', '衝撃']):
        return "https://images.unsplash.com/photo-1589829545856-d10d557cf95f?w=400&h=300&fit=crop"  # 社会問題
    
    elif any(keyword in title_lower for keyword in ['地震', '震災', '災害', '台風', '津波', '火災']):
        return "https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400&h=300&fit=crop"  # 災害
    
    elif any(keyword in title_lower for keyword in ['科学', '研究', '実験', '発見', '宇宙', '技術']):
        return "https://images.unsplash.com/photo-1532094349884-543bc11b234d?w=400&h=300&fit=crop"  # 科学研究
    
    elif any(keyword in title_lower for keyword in ['環境', '気候', '温暖化', 'co2', '排出', '自然', '生態']):
        return "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop"  # 環境
    
    elif any(keyword in title_lower for keyword in ['ai', '人工知能', 'it', 'テクノロジー', 'デジタル', 'ソフトウェア', 'アプリ']):
        return "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop"  # テクノロジー
    
    elif any(keyword in title_lower for keyword in ['医療', '病院', '薬', '治療', '患者', '医師', '健康', 'ワクチン']):
        return "https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop"  # 医療
    
    elif any(keyword in title_lower for keyword in ['教育', '学校', '大学', '学生', '授業', '研究', '入試', '受験']):
        return "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=400&h=300&fit=crop"  # 教育
    
    elif any(keyword in title_lower for keyword in ['交通', '電車', '新幹線', '航空', '道路', 'バス', '運輸', '鉄道']):
        return "https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=400&h=300&fit=crop"  # 交通
    
    elif any(keyword in title_lower for keyword in ['自動車', '車', 'トヨタ', 'ホンダ', '日産', 'ev', '電気自動車']):
        return "https://images.unsplash.com/photo-1549924231-f129b911e442?w=400&h=300&fit=crop"  # 自動車
    
    elif any(keyword in title_lower for keyword in ['株価', '株式', '投資', '市場', '日経', 'ダウ', '証券', '金融', '銀行']):
        return "https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=300&fit=crop"  # 金融
    
    elif any(keyword in title_lower for keyword in ['企業', '会社', 'ビジネス', '業績', '決算', '売上', '経営', 'cro']):
        return "https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=400&h=300&fit=crop"  # ビジネス
    
    elif any(keyword in title_lower for keyword in ['不動産', '住宅', '建設', '建物', 'マンション', '土地']):
        return "https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400&h=300&fit=crop"  # 不動産
    
    elif any(keyword in title_lower for keyword in ['小売', '店舗', '販売', '消費', 'コンビニ', '売上']):
        return "https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=300&fit=crop"  # 小売
    
    elif any(keyword in title_lower for keyword in ['エネルギー', '電力', '石油', 'ガス', '原油', '発電', '再生可能']):
        return "https://images.unsplash.com/photo-1473341304170-971dccb5ac1e?w=400&h=300&fit=crop"  # エネルギー
    
    elif any(keyword in title_lower for keyword in ['製造', '工場', '生産', '産業', '機械', '輸出', '輸入']):
        return "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400&h=300&fit=crop"  # 製造業
    
    elif any(keyword in title_lower for keyword in ['食品', '農業', '農産物', '食料', '料理', '飲食']):
        return "https://images.unsplash.com/photo-1542838132-92c53300491e?w=400&h=300&fit=crop"  # 食品・農業
    
    elif any(keyword in title_lower for keyword in ['旅行', '観光', 'ホテル', '空港', 'ana', 'jal']):
        return "https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=400&h=300&fit=crop"  # 旅行
    
    elif any(keyword in title_lower for keyword in ['映画', '音楽', '芸能', 'テレビ', 'ドラマ', 'アニメ', '文化', 'アート']):
        return "https://images.unsplash.com/photo-1489824904134-891ab64532f1?w=400&h=300&fit=crop"  # エンターテイメント
    
    else:
        return "https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=400&h=300&fit=crop"  # 一般ニュース

def get_news_category(title: str) -> str:
    """Determine news category based on title content"""
    title_lower = title.lower()
    
    if any(keyword in title_lower for keyword in ['野球', 'サッカー', 'テニス', 'ゴルフ', '相撲', 'スポーツ', '横綱', '選手', '試合', '勝利', '敗北', 'プロ野球', 'jリーグ', 'オリンピック', '大会', '競技']):
        return "スポーツ"
    
    elif any(keyword in title_lower for keyword in ['政治', '政府', '首相', '大臣', '国会', '選挙', '政策', '法案', '議員', '党', '内閣', '官房']):
        return "政治"
    
    elif any(keyword in title_lower for keyword in ['中国', '韓国', 'アメリカ', 'ロシア', '北朝鮮', '台湾', '外交', '国際', '大使', '首脳', '会談', '条約', '貿易摩擦']):
        return "国際"
    
    elif any(keyword in title_lower for keyword in ['ai', '人工知能', 'it', 'テクノロジー', 'デジタル', 'ソフトウェア', 'アプリ', 'システム', 'ネット', 'インターネット', 'スマホ', 'コンピュータ']):
        return "テクノロジー"
    
    elif any(keyword in title_lower for keyword in ['社会', '事件', '事故', '災害', '地震', '台風', '火災', '犯罪', '逮捕', '裁判', '判決', '宗教', '僧侶', '寺院']):
        return "社会"
    
    elif any(keyword in title_lower for keyword in ['医療', '病院', '薬', '治療', '患者', '医師', '看護', '健康', 'ワクチン', '感染', 'コロナ', '新型', 'インフルエンザ']):
        return "医療"
    
    elif any(keyword in title_lower for keyword in ['環境', '気候', '温暖化', '科学', '研究', '実験', '発見', '宇宙', '原発', '核', '平和', '原爆']):
        return "科学・環境"
    
    elif any(keyword in title_lower for keyword in ['芸能', '映画', '音楽', 'テレビ', 'ドラマ', 'アニメ', '俳優', '歌手', 'タレント', 'アイドル', 'コンサート']):
        return "エンタメ"
    
    elif any(keyword in title_lower for keyword in ['交通', '電車', '新幹線', '航空', '空港', '道路', '自動車', 'バス', '運輸', '鉄道']):
        return "交通"
    
    elif any(keyword in title_lower for keyword in ['教育', '学校', '大学', '学生', '入試', '受験', '授業', '教師', '先生', '学習']):
        return "教育"
    
    else:
        return "経済"

def generate_mizutani_article() -> NewsItem:
    """Generate a fictional article about M谷"""
    is_gossip = random.randint(1, 3) == 1
    
    if is_gossip:
        titles = [
            "CRO勤務のM谷氏、荒川区の居酒屋で同僚と口論騒動",
            "元ハンドボール選手のM谷氏、プロレス観戦中にファンと小競り合い",
            "M谷氏（36）、既婚者でありながら合コン参加疑惑が浮上",
            "M谷氏、会社の飲み会で後輩に説教し場の空気を悪化させる",
            "CRO勤務のM谷氏、電車内でのマナー違反が目撃される",
            "M谷氏、荒川区のジムで他の利用者とトラブル発生",
            "元ハンドボール部のM谷氏、同窓会で武勇伝を語り続け顰蹙を買う",
            "M谷氏、プロレス会場で選手に野次を飛ばし注意される",
            "CRO勤務のM谷氏、近所のコンビニで店員に横柄な態度",
            "M谷氏、荒川区の町内会で他の住民と意見対立",
            "既婚者のM谷氏、SNSで不適切な投稿をして炎上騒動",
            "M谷氏、会社の健康診断で医師に反抗的な態度を取る",
            "M谷氏、荒川区のスーパーでレジ待ちの列に割り込み騒動",
            "CRO勤務のM谷氏、会社の駐車場で他の車に接触事故を起こし逃走",
            "M谷氏、荒川区の図書館で大声で電話し他の利用者から苦情",
            "元ハンドボール部のM谷氏、地域の草野球チームで審判に暴言",
            "M谷氏、プロレスグッズ購入を巡り妻と家計について大喧嘩",
            "CRO勤務のM谷氏、会社の歓迎会で新人女性社員にセクハラ発言",
            "M谷氏、荒川区の銭湯で他の客とマナーを巡りトラブル",
            "既婚者のM谷氏、出張先のホテルで不適切な行動が発覚",
            "M谷氏、荒川区の病院で診察の順番を巡り他の患者と口論",
            "CRO勤務のM谷氏、会社の忘年会で泥酔し同僚に絡む迷惑行為",
            "M谷氏、プロレス観戦後の帰宅途中で駅員に暴言を吐く",
            "元ハンドボール部のM谷氏、息子の学校行事で他の保護者と衝突",
            "M谷氏、荒川区の郵便局で配達員に理不尽なクレーム",
            "CRO勤務のM谷氏、会社の研修で講師に反抗的な態度で問題視",
            "M谷氏、近所の公園でバーベキューのマナー違反で注意される",
            "既婚者のM谷氏、同窓会で元カノとの不適切な接触が発覚",
            "M谷氏、荒川区のカラオケ店で他の客と音量を巡り大声で口論",
            "CRO勤務のM谷氏、会社のエレベーターで同僚の悪口を大声で発言",
            "M谷氏、プロレス雑誌の購入で書店員に理不尽な要求",
            "元ハンドボール部のM谷氏、地域の運動会で子どもに厳しすぎる指導",
            "M谷氏、荒川区の美容院で待ち時間にクレームをつけ騒動",
            "既婚者のM谷氏、会社の女性社員のインスタグラムを無断でフォロー",
            "CRO勤務のM谷氏、取引先との会食で酔って失礼な発言連発",
            "M谷氏、荒川区の歯医者で治療中に医師に暴言を吐く",
            "M谷氏、プロレス技の真似をして近所の子どもを泣かせる",
            "元ハンドボール部のM谷氏、ジムのシャワー室で他の利用者と衝突",
            "M谷氏、荒川区のファミレスで店員の接客態度にクレーム騒動",
            "CRO勤務のM谷氏、会社の会議で上司に反抗的な態度で問題視",
            "既婚者のM谷氏、近所の奥さんに不適切なアプローチで通報される",
            "M谷氏、荒川区のコインランドリーで順番を巡り他の客と口論",
            "M谷氏、プロレス観戦で隣の席の観客と座席を巡りトラブル",
            "CRO勤務のM谷氏、会社の送別会で退職者に失礼な発言",
            "元ハンドボール部のM谷氏、地域のマラソン大会で他の参加者に暴言",
            "M谷氏、荒川区のドラッグストアで薬剤師に横柄な態度",
            "M谷氏、会社の健康保険組合の説明会で担当者に理不尽なクレーム",
            "既婚者のM谷氏、出張先の温泉で他の宿泊客とマナーを巡り衝突",
            "CRO勤務のM谷氏、会社の安全講習で講師に反抗的な質問連発",
            "M谷氏、荒川区の携帯ショップで店員に高圧的な態度で契約変更要求",
            "M谷氏、プロレス会場の売店で商品の値段にクレームをつけ騒動",
            "元ハンドボール部のM谷氏、地域の清掃活動で他のボランティアと対立",
            "M谷氏、荒川区の整骨院で施術師に治療方法について暴言",
            "CRO勤務のM谷氏、会社の避難訓練で消防署員に反抗的な態度",
            "既婚者のM谷氏、近所の主婦とゴミ出しルールを巡り大声で口論",
            "M谷氏、荒川区のガソリンスタンドで店員のサービスにクレーム",
            "M谷氏、プロレス関連のネット掲示板で他のファンと炎上騒動",
            "元ハンドボール部のM谷氏、地域の体育館で利用時間を巡りトラブル",
            "CRO勤務のM谷氏、会社の労働組合の集会で執行部に暴言",
            "M谷氏、荒川区の眼科で診察待ちの間に他の患者に威圧的な態度",
            "既婚者のM谷氏、子どもの習い事の送迎で他の保護者と駐車場トラブル"
        ]
        summaries = [
            "荒川区内の居酒屋で、CRO勤務のM谷氏（36歳、183cm、95kg）が同僚との飲み会中に口論となり、店内が騒然となった。学生時代にハンドボールで鍛えた体格を活かした威圧的な態度が問題視されている。既婚者である同氏の行動に、周囲からは疑問の声が上がっている。",
            "都内のプロレス会場で、M谷氏（36歳、CRO勤務）が他の観客と小競り合いを起こした。身長183cm、体重95kgの同氏が学生時代のハンドボール経験を活かした体格で威圧したとされる。荒川区在住の既婚者である同氏の行動に、プロレスファンからは「マナー違反」との声。",
            "CRO勤務のM谷氏（36歳、荒川区在住）が、既婚者でありながら都内で開催された合コンに参加していた疑惑が浮上。身長183cm、体重95kgの堂々とした体格で学生時代はハンドボール部に所属していた同氏。プロレス好きとしても知られるが、今回の行動に関係者は「家庭を大切にすべき」と苦言。",
            "会社の歓送迎会で、M谷氏（36歳、CRO勤務）が新入社員に対して長時間の説教を行い、場の雰囲気を悪化させた。身長183cm、体重95kgの威圧的な体格で、学生時代のハンドボール部での経験を引き合いに出した指導が「パワハラ的」と問題視されている。",
            "JR山手線車内で、M谷氏（36歳、荒川区在住）が大声で電話をしていたところを他の乗客に注意され、逆ギレする場面が目撃された。CRO勤務の同氏は学生時代にハンドボールをしていた体格（183cm、95kg）を活かして威圧的な態度を取ったという。",
            "荒川区内のスポーツジムで、M谷氏（36歳、CRO勤務）が器具の独占使用を巡って他の利用者とトラブルになった。身長183cm、体重95kgの体格で学生時代はハンドボール部に所属していた同氏。既婚者でありながらジムでの態度が問題視されている。",
            "学生時代のハンドボール部同窓会で、M谷氏（36歳、CRO勤務、荒川区在住）が自身の武勇伝を延々と語り続け、他の参加者から顰蹙を買った。身長183cm、体重95kgの体格を誇示するような発言も多く、既婚者としての品格が疑問視されている。",
            "プロレス観戦中、M谷氏（36歳、荒川区在住）が選手に対して不適切な野次を飛ばし、会場スタッフから注意を受けた。CRO勤務で学生時代はハンドボール部だった同氏の身長183cm、体重95kgの体格が威圧的だったとの証言もある。",
            "荒川区内のコンビニで、M谷氏（36歳、CRO勤務）が店員に対して横柄な態度を取り、他の客から苦情が寄せられた。学生時代にハンドボールで鍛えた身長183cm、体重95kgの体格を活かした威圧的な行動が問題となっている。",
            "荒川区の町内会で、M谷氏（36歳、CRO勤務）が他の住民と激しい意見対立を起こした。身長183cm、体重95kgの体格で学生時代はハンドボール部に所属していた同氏。既婚者でありながら地域での協調性に欠ける行動が批判されている。",
            "M谷氏（36歳、荒川区在住、CRO勤務）がSNSに投稿した内容が不適切として炎上騒動となった。学生時代のハンドボール部での経験を自慢する投稿や、身長183cm、体重95kgの体格を誇示する内容が「既婚者として不適切」と批判を浴びている。",
            "会社の健康診断で、M谷氏（36歳、CRO勤務、荒川区在住）が医師の指導に反抗的な態度を示し、問題となった。身長183cm、体重95kgの体格で学生時代はハンドボール部だった同氏。既婚者としての自覚が問われる行動として話題になっている。",
            "荒川区内のスーパーで、M谷氏（36歳、CRO勤務）がレジ待ちの列に割り込み、他の客とトラブルになった。身長183cm、体重95kgの体格で学生時代はハンドボール部だった同氏が威圧的な態度を取ったとされる。既婚者としてのマナーが問われている。",
            "会社の駐車場で、M谷氏（36歳、荒川区在住、CRO勤務）が他の車に接触事故を起こしながら現場から立ち去った疑惑が浮上。学生時代のハンドボール部で培った体格（183cm、95kg）を活かした逃走だったとの目撃証言もある。既婚者としての責任感が疑問視されている。",
            "荒川区の図書館で、M谷氏（36歳、CRO勤務）が館内で大声で電話をし、注意した司書に対して威圧的な態度を取った。身長183cm、体重95kgの体格で学生時代はハンドボール部に所属していた同氏。既婚者でありながら公共マナーに欠ける行動が批判されている。",
            "地域の草野球チームで審判を務めていた際、M谷氏（36歳、荒川区在住、CRO勤務）が判定に不満を持った選手に暴言を吐いた。学生時代のハンドボール部での経験を引き合いに出した高圧的な態度が問題となり、身長183cm、体重95kgの威圧的な体格も相まって場が険悪になった。",
            "M谷氏（36歳、CRO勤務、荒川区在住）が趣味のプロレスグッズ購入を巡り、家計を管理する妻と激しい口論になった。身長183cm、体重95kgの体格で学生時代はハンドボール部だった同氏が、既婚者でありながら家庭内での金銭感覚が問題視されている。",
            "会社の新人歓迎会で、M谷氏（36歳、荒川区在住、CRO勤務）が新入社員の女性に対してセクハラ発言をし、問題となった。学生時代のハンドボール部での体格（183cm、95kg）を誇示するような発言も含まれており、既婚者としての自覚が疑問視されている。",
            "荒川区の銭湯で、M谷氏（36歳、CRO勤務）が他の客とマナーを巡りトラブルになった。身長183cm、体重95kgの体格で学生時代はハンドボール部に所属していた同氏が威圧的な態度を取ったとされる。既婚者でありながら公衆浴場でのマナー違反が問題視されている。",
            "出張先のホテルで、M谷氏（36歳、荒川区在住、CRO勤務）の不適切な行動が発覚し、社内で問題となった。学生時代のハンドボール部で培った体格（183cm、95kg）を活かした行動だったとの証言もある。既婚者としての倫理観が厳しく問われている。",
            "荒川区の病院で、M谷氏（36歳、CRO勤務）が診察の順番を巡り他の患者と口論になった。身長183cm、体重95kgの体格で学生時代はハンドボール部だった同氏が威圧的な態度を取ったとされる。既婚者でありながら病院でのマナー違反が批判されている。",
            "会社の忘年会で、M谷氏（36歳、荒川区在住、CRO勤務）が泥酔し同僚に絡む迷惑行為を行った。学生時代のハンドボール部での体格（183cm、95kg）を活かした威圧的な行動が問題となり、既婚者としての節度が疑問視されている。",
            "プロレス観戦後の帰宅途中、M谷氏（36歳、CRO勤務、荒川区在住）が駅員に対して暴言を吐いた。身長183cm、体重95kgの体格で学生時代はハンドボール部に所属していた同氏。既婚者でありながら公共交通機関でのマナー違反が問題視されている。",
            "息子の学校行事で、M谷氏（36歳、荒川区在住、CRO勤務）が他の保護者と衝突した。学生時代のハンドボール部での経験を引き合いに出した高圧的な態度と、身長183cm、体重95kgの威圧的な体格が問題となった。既婚者として子どもの前での行動が批判されている。",
            "荒川区の郵便局で、M谷氏（36歳、CRO勤務）が配達員に理不尽なクレームをつけた。身長183cm、体重95kgの体格で学生時代はハンドボール部だった同氏が威圧的な態度を取ったとされる。既婚者でありながらサービス業への態度が問題視されている。",
            "会社の研修で、M谷氏（36歳、荒川区在住、CRO勤務）が外部講師に反抗的な態度を示し、問題となった。学生時代のハンドボール部での経験を引き合いに出した発言と、身長183cm、体重95kgの威圧的な体格が場の雰囲気を悪化させた。既婚者としての社会人マナーが疑問視されている。",
            "荒川区の公園で、M谷氏（36歳、CRO勤務）がバーベキューのマナー違反で他の利用者から注意された。身長183cm、体重95kgの体格で学生時代はハンドボール部に所属していた同氏が逆ギレしたとされる。既婚者でありながら公共施設でのマナー違反が批判されている。",
            "同窓会で、M谷氏（36歳、荒川区在住、CRO勤務）が元カノとの不適切な接触をしていたことが発覚した。学生時代のハンドボール部での体格（183cm、95kg）を誇示するような行動も含まれており、既婚者としての倫理観が厳しく問われている。"
        ]
        category = "ゴシップ"
    else:
        titles = [
            "CRO業界のエキスパートM谷氏、新薬開発プロジェクトで大きな成果",
            "元ハンドボール選手のM谷氏、地域スポーツ振興で表彰される",
            "M谷氏、プロレス愛好家として地域イベントで講演活動",
            "M谷氏、CRO業界の若手育成プログラムで講師を務める",
            "荒川区在住のM谷氏、地域清掃活動でリーダーシップを発揮",
            "M谷氏、会社の業績向上に貢献し社内表彰を受ける",
            "元ハンドボール部のM谷氏、母校で後輩指導にボランティア参加",
            "M谷氏、プロレス観戦を通じた地域交流イベントを企画",
            "CRO勤務のM谷氏、医療業界の発展に寄与する論文を発表",
            "M谷氏、荒川区の防災訓練で積極的な参加姿勢を評価される",
            "既婚者のM谷氏、ワークライフバランスの模範として注目",
            "M谷氏、地域の高齢者支援活動で感謝状を受ける",
            "元ハンドボール選手のM谷氏、スポーツを通じた健康促進活動を推進",
            "M谷氏、CRO業界の国際会議で日本代表として発表",
            "荒川区のM谷氏、地域商店街の活性化プロジェクトに参画",
            "M谷氏、プロレス文化の普及活動で文化庁から表彰",
            "CRO勤務のM谷氏、新人研修プログラムの改善で成果を上げる",
            "M谷氏、地域の子育て支援活動に夫婦で積極参加",
            "M谷氏、荒川区の小学校で食育講座の講師として活躍",
            "CRO勤務のM谷氏、医療機器開発で特許を取得し業界で話題",
            "元ハンドボール部のM谷氏、地域の障害者スポーツ支援で貢献",
            "M谷氏、プロレス解説者として地域ケーブルTVで人気番組担当",
            "荒川区在住のM谷氏、近隣住民の緊急事態で救助活動に参加",
            "M谷氏、会社の環境保護活動で社長賞を受賞",
            "元ハンドボール選手のM谷氏、国体選手の指導で成果を上げる",
            "M谷氏、地域の読み聞かせボランティアで子どもたちに人気",
            "CRO勤務のM谷氏、国際学会で研究成果を発表し高評価",
            "M谷氏、荒川区の観光大使に任命され地域PR活動を開始",
            "既婚者のM谷氏、夫婦で参加した料理教室で優秀賞を受賞",
            "M谷氏、プロレス技術を活用した護身術教室で講師を務める",
            "元ハンドボール部のM谷氏、スポーツ医学の知識で地域貢献",
            "CRO勤務のM谷氏、新薬の臨床試験で画期的な成果を達成",
            "M谷氏、荒川区の伝統工芸保存活動で文化継承に貢献",
            "M谷氏、地域の交通安全運動で模範ドライバーとして表彰",
            "元ハンドボール選手のM谷氏、パラリンピック選手のサポートで活躍",
            "CRO勤務のM谷氏、医療AI開発プロジェクトでリーダーを務める",
            "M谷氏、プロレス愛好家として慈善興行の企画運営で成功",
            "荒川区在住のM谷氏、地域の独居高齢者見守り活動で感謝状",
            "M谷氏、会社の新人メンター制度で優秀指導者として表彰",
            "既婚者のM谷氏、夫婦で取り組む地域農業支援活動が話題",
            "元ハンドボール部のM谷氏、ジュニア選手育成で全国大会出場",
            "CRO勤務のM谷氏、医療格差解消プロジェクトで社会貢献賞",
            "M谷氏、荒川区の災害時避難所運営で重要な役割を担う",
            "M谷氏、プロレス文化を通じた国際交流活動で外務省から表彰",
            "元ハンドボール選手のM谷氏、スポーツ心理学を学び指導に活用",
            "M谷氏、荒川区の図書館で読書推進活動のボランティアリーダーに",
            "CRO勤務のM谷氏、がん治療薬の開発で医学会から感謝状",
            "M谷氏、地域の音楽祭でプロレス入場曲の解説講座を開催",
            "元ハンドボール部のM谷氏、地域の中学校で部活動指導者として活躍",
            "既婚者のM谷氏、夫婦で参加した社交ダンス大会で入賞",
            "M谷氏、荒川区の商工会議所で中小企業支援活動に参画",
            "CRO勤務のM谷氏、希少疾患の治療法開発で国際的な評価",
            "M谷氏、プロレス愛好家として地域の祭りで模擬試合を企画",
            "元ハンドボール選手のM谷氏、地域の健康教室で運動指導",
            "M谷氏、荒川区の環境保護団体で河川清掃活動をリード",
            "CRO勤務のM谷氏、医療従事者向けの研修プログラムを開発",
            "既婚者のM谷氏、地域の結婚相談所でカウンセラーとして活動",
            "M谷氏、プロレス技術を応用したリハビリ体操を考案し話題",
            "元ハンドボール部のM谷氏、地域の運動会で審判として大活躍",
            "M谷氏、荒川区の文化センターで健康講座の講師を務める",
            "CRO勤務のM谷氏、新型コロナワクチンの安全性評価で貢献",
            "M谷氏、地域のペット愛好会で動物愛護活動に参加",
            "元ハンドボール選手のM谷氏、地域の介護施設でレクリエーション指導",
            "既婚者のM谷氏、夫婦で地域の婚活イベントをサポート",
            "M谷氏、プロレス観戦ツアーを企画し地域活性化に貢献",
            "CRO勤務のM谷氏、医療機器の品質管理で業界標準を確立",
            "M谷氏、荒川区の青少年育成委員会で委員長に就任",
            "元ハンドボール部のM谷氏、地域のマラソン大会で給水ボランティア",
            "M谷氏、地域の防犯パトロール隊で隊長として活動",
            "CRO勤務のM谷氏、臨床試験の効率化システムを開発し特許取得",
            "既婚者のM谷氏、夫婦で地域の高齢者向け料理教室を開催",
            "M谷氏、プロレス愛好家として地域の体育館で無料観戦会を企画",
            "元ハンドボール選手のM谷氏、地域の小学生にスポーツの楽しさを指導",
            "M谷氏、荒川区の商店街で地域通貨の普及活動に参画",
            "CRO勤務のM谷氏、アルツハイマー病治療薬の開発で画期的進展",
            "M谷氏、地域の災害ボランティアセンターで運営委員として活躍",
            "元ハンドボール部のM谷氏、地域の体力測定会で測定員として貢献",
            "既婚者のM谷氏、夫婦で地域の子ども食堂の運営をサポート",
            "M谷氏、プロレス技術を活用した転倒防止体操を地域で普及",
            "CRO勤務のM谷氏、医療データの解析技術で学会賞を受賞",
            "M谷氏、荒川区の国際交流協会で通訳ボランティアとして活動",
            "元ハンドボール選手のM谷氏、地域の障害者施設でスポーツ指導",
            "M谷氏、地域の認知症カフェで傾聴ボランティアとして活動",
            "CRO勤務のM谷氏、再生医療分野の研究で国際共同研究をリード",
            "荒川区の図書館で読書推進活動のボランティアリーダーに就任したM谷氏（36歳、CRO勤務）の取り組みが話題となっている。学生時代のハンドボール部での集中力と、身長183cm、体重95kgの存在感で地域住民をまとめ上げている。既婚者として知識の普及への意識も高い。",
            "がん治療薬の開発で医学会から感謝状を受けたM谷氏（36歳、荒川区在住、CRO勤務）の研究が評価されている。学生時代のハンドボール部で培った粘り強さと、身長183cm、体重95kgの体格に裏打ちされた精神力で研究に取り組んだ成果。既婚者として患者への思いも研究の原動力となっている。",
            "地域の音楽祭でプロレス入場曲の解説講座を開催したM谷氏（36歳、CRO勤務、荒川区在住）の活動が好評を博している。学生時代のハンドボール部での表現力と、身長183cm、体重95kgの存在感を活かした解説が参加者に人気。既婚者として文化活動への貢献も評価されている。",
            "地域の中学校で部活動指導者として活躍している元ハンドボール部のM谷氏（36歳、荒川区在住、CRO勤務）の指導が注目されている。身長183cm、体重95kgの体格を活かした実技指導と、CRO業界での経験を踏まえた人生指導が生徒たちに好評。既婚者として生徒の人格形成にも配慮している。",
            "夫婦で参加した社交ダンス大会で入賞したM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが話題となっている。学生時代のハンドボール部でのリズム感と、身長183cm、体重95kgの体格を活かしたダンスが審査員から高評価。既婚者として夫婦の絆も深まっている。",
            "荒川区の商工会議所で中小企業支援活動に参画したM谷氏（36歳、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部での戦略的思考と、身長183cm、体重95kgの存在感で企業経営者をサポート。既婚者として地域経済への貢献意識も高い。",
            "希少疾患の治療法開発で国際的な評価を受けたM谷氏（36歳、荒川区在住、CRO勤務）の研究が話題となっている。学生時代のハンドボール部で培った集中力と、身長183cm、体重95kgの体格に裏打ちされた持久力で研究に取り組んだ成果。既婚者として患者家族への思いも研究を支えている。",
            "地域の祭りで模擬試合を企画したプロレス愛好家のM谷氏（36歳、CRO勤務、荒川区在住）の活動が大成功を収めた。学生時代のハンドボール部での企画力と、身長183cm、体重95kgの存在感で多くの観客を魅了。既婚者として家族も活動を応援している。",
            "地域の健康教室で運動指導を行っている元ハンドボール選手のM谷氏（36歳、荒川区在住、CRO勤務）の活動が評価されている。身長183cm、体重95kgの体格を活かした実技指導と、CRO業界での医学知識を組み合わせた指導が参加者に好評。既婚者として健康への関心も高い。",
            "荒川区の環境保護団体で河川清掃活動をリードしているM谷氏（36歳、CRO勤務）の取り組みが注目されている。学生時代のハンドボール部でのリーダーシップと、身長183cm、体重95kgの体格を活かした力仕事での貢献が評価されている。既婚者として次世代への責任感も強い。",
            "医療従事者向けの研修プログラムを開発したM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが業界で話題となっている。学生時代のハンドボール部での指導経験と、身長183cm、体重95kgの存在感を活かした研修が医療従事者に好評。既婚者として医療現場への貢献意識も高い。",
            "地域の結婚相談所でカウンセラーとして活動しているM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが評価されている。学生時代のハンドボール部での人間関係構築能力と、身長183cm、体重95kgの存在感で相談者をサポート。既婚者としての経験も相談業務に活かされている。",
            "プロレス技術を応用したリハビリ体操を考案し話題となっているM谷氏（36歳、荒川区在住、CRO勤務）の活動が注目されている。学生時代のハンドボール部での身体能力と、身長183cm、体重95kgの体格を活かした体操が医療関係者から高評価。既婚者として健康への意識も高い。",
            "地域の運動会で審判として大活躍したM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが評価されている。学生時代のハンドボール部での審判経験と、身長183cm、体重95kgの存在感で公正な判定を実施。既婚者として地域の子どもたちへの愛情も深い。",
            "荒川区の文化センターで健康講座の講師を務めるM谷氏（36歳、CRO勤務）の活動が好評を博している。学生時代のハンドボール部での体力管理経験と、身長183cm、体重95kgの体格維持の知識を活かした講座が参加者に人気。既婚者として家族の健康管理にも活かしている。",
            "新型コロナワクチンの安全性評価で貢献したM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部で培った集中力と、身長183cm、体重95kgの体格に裏打ちされた精神力で研究に取り組んだ成果。既婚者として社会への責任感も強い。",
            "地域のペット愛好会で動物愛護活動に参加しているM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが話題となっている。学生時代のハンドボール部での思いやりと、身長183cm、体重95kgの体格を活かした動物の世話が愛好会メンバーから感謝されている。既婚者として生命への尊重意識も高い。",
            "地域の介護施設でレクリエーション指導を行っている元ハンドボール選手のM谷氏（36歳、荒川区在住、CRO勤務）の活動が評価されている。身長183cm、体重95kgの体格を活かした体操指導と、学生時代のハンドボール部での経験を踏まえたレクリエーションが利用者に好評。既婚者として高齢者への敬意も深い。",
            "夫婦で地域の婚活イベントをサポートしているM谷氏（36歳、CRO勤務、荒川区在住）の活動が注目されている。学生時代のハンドボール部での人間関係構築能力と、身長183cm、体重95kgの存在感で参加者をサポート。既婚者としての経験も活動に活かされている。",
            "プロレス観戦ツアーを企画し地域活性化に貢献しているM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部での企画力と、身長183cm、体重95kgの存在感で多くの参加者をまとめ上げた。既婚者として家族も活動を応援している。",
            "医療機器の品質管理で業界標準を確立したM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが業界で話題となっている。学生時代のハンドボール部での精密性と、身長183cm、体重95kgの体格に裏打ちされた集中力で品質管理を徹底。既婚者として患者の安全への責任感も強い。",
            "荒川区の青少年育成委員会で委員長に就任したM谷氏（36歳、CRO勤務）の活動が注目されている。学生時代のハンドボール部でのリーダーシップと、身長183cm、体重95kgの存在感で青少年の健全育成を推進。既婚者として次世代への責任感も強い。",
            "地域のマラソン大会で給水ボランティアとして活躍した元ハンドボール部のM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが評価されている。身長183cm、体重95kgの体格を活かした力仕事と、学生時代のハンドボール部での経験を活かしたランナーサポートが好評。既婚者としてスポーツへの愛情も深い。",
            "地域の防犯パトロール隊で隊長として活動しているM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが評価されている。学生時代のハンドボール部でのリーダーシップと、身長183cm、体重95kgの存在感で地域の安全を守っている。既婚者として地域への責任感も強い。",
            "臨床試験の効率化システムを開発し特許取得したM谷氏（36歳、荒川区在住、CRO勤務）の研究が業界で話題となっている。学生時代のハンドボール部での戦略的思考と、身長183cm、体重95kgの体格に裏打ちされた集中力で開発に取り組んだ成果。既婚者として医療の発展への貢献意識も高い。",
            "夫婦で地域の高齢者向け料理教室を開催しているM谷氏（36歳、CRO勤務、荒川区在住）の活動が話題となっている。学生時代のハンドボール部での栄養管理経験と、身長183cm、体重95kgの体格維持の知識を活かした指導が高齢者に好評。既婚者として夫婦の協力も評価されている。",
            "地域の体育館で無料観戦会を企画したプロレス愛好家のM谷氏（36歳、荒川区在住、CRO勤務）の活動が大成功を収めた。学生時代のハンドボール部での企画力と、身長183cm、体重95kgの存在感で多くの観客を魅了。既婚者として地域貢献への意識も高い。",
            "地域の小学生にスポーツの楽しさを指導している元ハンドボール選手のM谷氏（36歳、CRO勤務、荒川区在住）の活動が評価されている。身長183cm、体重95kgの体格を活かした実技指導と、学生時代のハンドボール部での経験を踏まえた指導が子どもたちに好評。既婚者として次世代への愛情も深い。",
            "荒川区の商店街で地域通貨の普及活動に参画したM谷氏（36歳、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部での戦略的思考と、身長183cm、体重95kgの存在感で商店街の活性化を推進。既婚者として地域経済への貢献意識も高い。",
            "アルツハイマー病治療薬の開発で画期的進展を遂げたM谷氏（36歳、荒川区在住、CRO勤務）の研究が国際的に注目されている。学生時代のハンドボール部で培った粘り強さと、身長183cm、体重95kgの体格に裏打ちされた精神力で研究に取り組んだ成果。既婚者として患者家族への思いも研究を支えている。",
            "地域の災害ボランティアセンターで運営委員として活躍しているM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが評価されている。学生時代のハンドボール部でのリーダーシップと、身長183cm、体重95kgの体格を活かした災害対応が地域住民から信頼されている。既婚者として地域の安全への責任感も強い。",
            "地域の体力測定会で測定員として貢献している元ハンドボール部のM谷氏（36歳、荒川区在住、CRO勤務）の活動が評価されている。身長183cm、体重95kgの体格を活かした測定技術と、学生時代のハンドボール部での経験を踏まえた指導が参加者に好評。既婚者として健康への関心も高い。",
            "夫婦で地域の子ども食堂の運営をサポートしているM谷氏（36歳、CRO勤務、荒川区在住）の活動が話題となっている。学生時代のハンドボール部での思いやりと、身長183cm、体重95kgの体格を活かした力仕事での貢献が評価されている。既婚者として子どもたちへの愛情も深い。",
            "プロレス技術を活用した転倒防止体操を地域で普及しているM谷氏（36歳、荒川区在住、CRO勤務）の活動が注目されている。学生時代のハンドボール部での身体能力と、身長183cm、体重95kgの体格を活かした体操が高齢者から好評。既婚者として健康への意識も高い。",
            "医療データの解析技術で学会賞を受賞したM谷氏（36歳、CRO勤務、荒川区在住）の研究が業界で話題となっている。学生時代のハンドボール部での集中力と、身長183cm、体重95kgの体格に裏打ちされた精神力で研究に取り組んだ成果。既婚者として医療の発展への貢献意識も高い。",
            "荒川区の国際交流協会で通訳ボランティアとして活動しているM谷氏（36歳、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部での国際感覚と、身長183cm、体重95kgの存在感で外国人との交流を深めている。既婚者として国際理解への意識も高い。",
            "地域の障害者施設でスポーツ指導を行っている元ハンドボール選手のM谷氏（36歳、荒川区在住、CRO勤務）の活動が評価されている。身長183cm、体重95kgの体格を活かした指導技術と、学生時代のハンドボール部での経験を踏まえたサポートが利用者から感謝されている。既婚者として多様性への理解も深い。",
            "地域の認知症カフェで傾聴ボランティアとして活動しているM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが話題となっている。学生時代のハンドボール部での思いやりと、身長183cm、体重95kgの存在感で利用者に安心感を与えている。既婚者として高齢者への敬意も深い。",
            "再生医療分野の研究で国際共同研究をリードしているM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが国際的に注目されている。学生時代のハンドボール部でのリーダーシップと、身長183cm、体重95kgの体格に裏打ちされた存在感で国際チームをまとめ上げている。既婚者として医療の未来への責任感も強い。"
        ]
        summaries = [
            "CRO勤務のM谷氏（36歳、荒川区在住）が担当する新薬開発プロジェクトが大きな進展を見せている。身長183cm、体重95kgの堂々とした体格で、学生時代にハンドボールで培った集中力と持久力を業務に活かしている。既婚者として家庭も大切にしながら、プロレス観戦で息抜きをする同氏の働きぶりが業界内で高く評価されている。",
            "荒川区在住のM谷氏（36歳、CRO勤務）が、地域の青少年スポーツ振興活動で表彰された。学生時代にハンドボール部で活躍した経験を活かし、地域の子どもたちに指導を行っている。身長183cm、体重95kgの体格を活かした熱心な指導ぶりが評価され、既婚者として家庭と両立させながらの社会貢献活動が注目を集めている。",
            "プロレス愛好家として知られるM谷氏（36歳、CRO勤務、荒川区在住）が、地域イベントでプロレスの魅力について講演を行った。身長183cm、体重95kgの体格で学生時代はハンドボール部に所属していた同氏。既婚者として家庭を大切にしながら、趣味のプロレス観戦を通じて得た人生哲学を地域住民に伝える活動が好評を博している。",
            "CRO業界の若手育成プログラムで、M谷氏（36歳、荒川区在住）が講師として活躍している。学生時代のハンドボール部での経験を活かしたチームワークの重要性を説く指導が好評。身長183cm、体重95kgの堂々とした体格で、既婚者としての責任感も併せ持つ同氏の人柄が若手社員から慕われている。",
            "荒川区の地域清掃活動で、M谷氏（36歳、CRO勤務）がリーダーシップを発揮し、参加者から高い評価を得ている。学生時代にハンドボールで培った統率力を活かし、身長183cm、体重95kgの体格で率先して作業に取り組む姿勢が印象的。既婚者として地域貢献への意識も高い。",
            "M谷氏（36歳、荒川区在住、CRO勤務）が担当するプロジェクトの成功により、社内表彰を受けた。学生時代のハンドボール部で培った粘り強さと、身長183cm、体重95kgの体格に裏打ちされた存在感で、チームを牽引。既婚者として安定した私生活も業務に良い影響を与えている。",
            "母校を訪問したM谷氏（36歳、CRO勤務、荒川区在住）が、ハンドボール部の後輩指導にボランティアで参加した。身長183cm、体重95kgの体格を活かした実技指導と、CRO業界での経験を踏まえた人生アドバイスが部員たちに好評。既婚者としての人生経験も指導に活かされている。",
            "プロレス愛好家のM谷氏（36歳、荒川区在住、CRO勤務）が企画した地域交流イベントが大成功を収めた。学生時代のハンドボール部での経験を活かした企画力と、身長183cm、体重95kgの存在感で参加者をまとめ上げた。既婚者として家族の理解も得ながらの活動が評価されている。",
            "CRO勤務のM谷氏（36歳、荒川区在住）が、医療業界の発展に寄与する研究論文を発表し、業界内で注目を集めている。学生時代のハンドボール部で培った集中力と、身長183cm、体重95kgの体格に裏打ちされた精神力で研究に取り組んだ成果。既婚者として安定した環境も研究活動を支えている。",
            "荒川区の防災訓練で、M谷氏（36歳、CRO勤務）の積極的な参加姿勢が高く評価された。学生時代のハンドボール部での経験を活かしたチームワークと、身長183cm、体重95kgの体格を活かした救助活動への取り組みが印象的。既婚者として地域の安全への意識も高い。",
            "ワークライフバランスの模範として、M谷氏（36歳、荒川区在住、CRO勤務）が注目を集めている。学生時代のハンドボール部での時間管理術と、身長183cm、体重95kgの体格に裏打ちされた体力で、仕事と家庭を両立。既婚者として責任感を持ちながらプロレス観戦の趣味も楽しんでいる。",
            "荒川区の高齢者支援活動で、M谷氏（36歳、CRO勤務）が感謝状を受けた。学生時代のハンドボール部で培った思いやりの心と、身長183cm、体重95kgの体格を活かした力仕事での貢献が評価された。既婚者として将来への責任感も活動の原動力となっている。",
            "元ハンドボール選手のM谷氏（36歳、荒川区在住、CRO勤務）が、スポーツを通じた健康促進活動を推進している。身長183cm、体重95kgの体格を活かした実技指導と、CRO業界での知識を組み合わせた科学的アプローチが好評。既婚者として家族の健康管理にも活かしている。",
            "CRO業界の国際会議で、M谷氏（36歳、荒川区在住）が日本代表として発表を行った。学生時代のハンドボール部で培った度胸と、身長183cm、体重95kgの堂々とした体格で、海外の専門家たちとも対等に議論。既婚者として安定した私生活が仕事への集中力を支えている。",
            "荒川区の商店街活性化プロジェクトに参画したM谷氏（36歳、CRO勤務）の企画力が高く評価されている。学生時代のハンドボール部での戦略的思考と、身長183cm、体重95kgの存在感で地域住民をまとめ上げた。既婚者として地域への愛着も深く、プロレス観戦で培った娯楽性も企画に活かされている。",
            "プロレス文化の普及活動で、M谷氏（36歳、荒川区在住、CRO勤務）が文化庁から表彰を受けた。学生時代のハンドボール部での経験を活かした組織運営と、身長183cm、体重95kgの体格に裏打ちされた説得力で活動を推進。既婚者として責任感を持ちながら文化振興に貢献している。",
            "新人研修プログラムの改善で成果を上げたM谷氏（36歳、CRO勤務、荒川区在住）が社内で注目されている。学生時代のハンドボール部での指導経験と、身長183cm、体重95kgの存在感を活かした研修が新人たちに好評。既婚者としての人生経験も指導内容に深みを与えている。",
            "地域の子育て支援活動に夫婦で参加しているM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部での経験を活かした子どもたちとの接し方と、身長183cm、体重95kgの体格を活かした遊び相手としての活躍が印象的。プロレス好きの一面も子どもたちに人気。",
            "荒川区の小学校で食育講座の講師を務めるM谷氏（36歳、CRO勤務）の活動が話題となっている。学生時代のハンドボール部での栄養管理経験と、身長183cm、体重95kgの体格維持の知識を活かした指導が好評。既婚者として家庭での実践経験も講座内容に深みを与えている。",
            "医療機器開発で特許を取得したM谷氏（36歳、荒川区在住、CRO勤務）が業界で注目を集めている。学生時代のハンドボール部で培った集中力と、身長183cm、体重95kgの体格に裏打ちされた持久力で研究に取り組んだ成果。既婚者として安定した環境が創造性を支えている。",
            "地域の障害者スポーツ支援で貢献しているM谷氏（36歳、CRO勤務、荒川区在住）の活動が評価されている。学生時代のハンドボール部での経験を活かした指導技術と、身長183cm、体重95kgの体格を活かしたサポートが参加者から感謝されている。既婚者として多様性への理解も深い。",
            "地域ケーブルTVでプロレス解説番組を担当するM谷氏（36歳、荒川区在住、CRO勤務）が人気を博している。学生時代のハンドボール部での戦術分析能力と、身長183cm、体重95kgの体格から生まれる説得力のある解説が視聴者に好評。既婚者として家族も番組を応援している。",
            "近隣住民の緊急事態で救助活動に参加したM谷氏（36歳、CRO勤務、荒川区在住）の行動が称賛されている。学生時代のハンドボール部で培った瞬発力と、身長183cm、体重95kgの体格を活かした迅速な対応が功を奏した。既婚者として地域への責任感も強い。",
            "会社の環境保護活動で社長賞を受賞したM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部でのチームワークと、身長183cm、体重95kgの体格を活かした率先垂範の姿勢が同僚たちを動かした。既婚者として次世代への責任も感じている。",
            "国体選手の指導で成果を上げている元ハンドボール選手のM谷氏（36歳、CRO勤務、荒川区在住）が注目されている。身長183cm、体重95kgの体格を活かした実技指導と、CRO業界での科学的知識を組み合わせた指導法が選手たちの成長を促している。既婚者として選手の人格形成にも配慮している。",
            "地域の読み聞かせボランティアで子どもたちに人気のM谷氏（36歳、荒川区在住、CRO勤務）の活動が話題となっている。学生時代のハンドボール部での表現力と、身長183cm、体重95kgの存在感を活かした迫力ある読み聞かせが好評。既婚者として子どもたちへの愛情も深い。",
            "国際学会で研究成果を発表し高評価を得たM谷氏（36歳、CRO勤務、荒川区在住）が業界で話題となっている。学生時代のハンドボール部で培った集中力と、身長183cm、体重95kgの体格に裏打ちされた精神力で研究に取り組んだ成果。既婚者として家族の支えも研究活動を後押ししている。",
            "荒川区の観光大使に任命されたM谷氏（36歳、CRO勤務）の地域PR活動が始まった。学生時代のハンドボール部での表現力と、身長183cm、体重95kgの堂々とした体格で地域の魅力を発信。既婚者として地域への愛着も深く、プロレス好きの一面も観光資源として活用している。",
            "夫婦で参加した料理教室で優秀賞を受賞したM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが話題となっている。学生時代のハンドボール部での集中力と、身長183cm、体重95kgの体格維持のための栄養知識が料理に活かされた。既婚者として夫婦の絆も深まっている。",
            "プロレス技術を活用した護身術教室で講師を務めるM谷氏（36歳、CRO勤務、荒川区在住）の活動が注目されている。学生時代のハンドボール部での身体能力と、身長183cm、体重95kgの体格を活かした実技指導が参加者に好評。既婚者として家族の安全への意識も高い。",
            "スポーツ医学の知識で地域貢献している元ハンドボール部のM谷氏（36歳、荒川区在住、CRO勤務）の活動が評価されている。身長183cm、体重95kgの体格維持の経験と、CRO業界での医学知識を組み合わせた指導が地域住民に好評。既婚者として健康への関心も高い。",
            "新薬の臨床試験で画期的な成果を達成したM谷氏（36歳、CRO勤務、荒川区在住）が業界で注目されている。学生時代のハンドボール部で培った粘り強さと、身長183cm、体重95kgの体格に裏打ちされた精神力で研究に取り組んだ成果。既婚者として患者への思いも研究の原動力となっている。",
            "荒川区の伝統工芸保存活動で文化継承に貢献しているM谷氏（36歳、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部での集中力と、身長183cm、体重95kgの体格を活かした力仕事での貢献が職人たちから感謝されている。既婚者として次世代への責任も感じている。",
            "地域の交通安全運動で模範ドライバーとして表彰されたM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが話題となっている。学生時代のハンドボール部での判断力と、身長183cm、体重95kgの体格に裏打ちされた安定感のある運転が評価された。既婚者として家族の安全への意識も高い。",
            "パラリンピック選手のサポートで活躍している元ハンドボール選手のM谷氏（36歳、CRO勤務、荒川区在住）の活動が注目されている。身長183cm、体重95kgの体格を活かした実技サポートと、CRO業界での科学的知識を組み合わせた指導が選手たちの成長を促している。既婚者として多様性への理解も深い。",
            "医療AI開発プロジェクトでリーダーを務めるM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが業界で話題となっている。学生時代のハンドボール部でのリーダーシップと、身長183cm、体重95kgの存在感でチームをまとめ上げている。既婚者として安定した環境が創造性を支えている。",
            "慈善興行の企画運営で成功を収めたプロレス愛好家のM谷氏（36歳、CRO勤務、荒川区在住）の活動が評価されている。学生時代のハンドボール部での企画力と、身長183cm、体重95kgの存在感で多くの人を巻き込んだ。既婚者として社会貢献への意識も高い。",
            "地域の独居高齢者見守り活動で感謝状を受けたM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが話題となっている。学生時代のハンドボール部での思いやりと、身長183cm、体重95kgの体格を活かした力仕事での貢献が高齢者から感謝されている。既婚者として将来への責任感も強い。",
            "会社の新人メンター制度で優秀指導者として表彰されたM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが評価されている。学生時代のハンドボール部での指導経験と、身長183cm、体重95kgの存在感を活かした指導が新人たちに好評。既婚者としての人生経験も指導に深みを与えている。",
            "夫婦で取り組む地域農業支援活動が話題となっているM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが注目されている。学生時代のハンドボール部での体力と、身長183cm、体重95kgの体格を活かした農作業が農家から感謝されている。既婚者として夫婦の絆も深まっている。",
            "ジュニア選手育成で全国大会出場を果たした元ハンドボール部のM谷氏（36歳、CRO勤務、荒川区在住）の指導が評価されている。身長183cm、体重95kgの体格を活かした実技指導と、CRO業界での科学的知識を組み合わせた指導法が選手たちの成長を促した。既婚者として選手の人格形成にも配慮している。",
            "医療格差解消プロジェクトで社会貢献賞を受賞したM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが評価されている。学生時代のハンドボール部での公平性への意識と、身長183cm、体重95kgの存在感でプロジェクトを推進。既婚者として社会への責任感も強い。",
            "荒川区の災害時避難所運営で重要な役割を担うM谷氏（36歳、CRO勤務）の活動が評価されている。学生時代のハンドボール部でのリーダーシップと、身長183cm、体重95kgの体格を活かした力仕事での貢献が住民から信頼されている。既婚者として地域の安全への意識も高い。",
            "プロレス文化を通じた国際交流活動で外務省から表彰されたM谷氏（36歳、荒川区在住、CRO勤務）の取り組みが話題となっている。学生時代のハンドボール部での国際感覚と、身長183cm、体重95kgの存在感で海外の人々との交流を深めた。既婚者として文化の架け橋としての役割も果たしている。",
            "スポーツ心理学を学び指導に活用している元ハンドボール選手のM谷氏（36歳、CRO勤務、荒川区在住）の取り組みが注目されている。身長183cm、体重95kgの体格を活かした実技指導と、CRO業界での科学的知識を組み合わせた新しい指導法が選手たちに好評。既婚者として選手の心の成長にも配慮している。"
        ]
        category = "地域"
    
    title = random.choice(titles)
    summary = random.choice(summaries)
    
    if len(summary) > 280:
        sentences = summary.split('。')
        truncated = ""
        for sentence in sentences:
            if len(truncated + sentence + '。') <= 280:
                truncated += sentence + '。'
            else:
                break
        if truncated and len(truncated) > 150:
            summary = truncated
        else:
            if len(summary) > 280:
                last_space = summary[:280].rfind(' ')
                if last_space > 200:
                    summary = summary[:last_space] + "。"
                else:
                    summary = summary[:280]
    
    return NewsItem(
        title=title,
        summary=summary,
        published=datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
        source="地域ニュース",
        url="https://example.com/mizutani-news",
        image_url=get_news_related_image(title),
        category=category
    )

def fetch_rss_news() -> List[NewsItem]:
    """Fetch news from RSS feeds"""
    rss_feeds = [
        "https://www3.nhk.or.jp/rss/news/cat6.xml",
        "https://www3.nhk.or.jp/rss/news/cat7.xml",
        "https://asia.nikkei.com/rss/feed/nar",
        "https://news.yahoo.co.jp/rss/topics/business.xml",
    ]
    
    news_items = []
    
    for feed_url in rss_feeds:
        try:
            feed = feedparser.parse(feed_url)
            source = "Yahoo!ニュース" if "yahoo" in feed_url else "NHKニュース"
            
            for entry in feed.entries[:3]:
                title = entry.title
                summary = entry.get('summary', entry.get('description', ''))
                
                if len(summary) > 300:
                    sentences = summary.split('。')
                    truncated = ""
                    for sentence in sentences:
                        if len(truncated + sentence + '。') <= 280:
                            truncated += sentence + '。'
                        else:
                            break
                    if truncated and len(truncated) > 100:
                        summary = truncated
                    else:
                        words = summary[:280].split()
                        summary = ' '.join(words[:-1]) if len(words) > 1 else summary[:280]
                elif len(summary) < 50:
                    if len(summary) > 260:
                        summary = summary[:257] + "..."
                    elif len(summary) < 50:
                        summary = f"{summary} {title}に関する詳細情報です。"
                        if len(summary) > 260:
                            summary = summary[:257] + "..."
                
                category = get_news_category(title)
                
                news_item = NewsItem(
                    title=title,
                    summary=summary,
                    published=entry.get('published', datetime.now().strftime("%Y-%m-%d %H:%M:%S")),
                    source=source,
                    url=entry.get('link', ''),
                    image_url=get_news_related_image(title),
                    category=category
                )
                news_items.append(news_item)
                
        except Exception as e:
            print(f"Error fetching from {feed_url}: {e}")
            continue
    
    return news_items

def generate_overall_summary(news_items: List[NewsItem]) -> str:
    """Generate a 500-character overall summary based on actual collected news"""
    sources = list(set([item.source for item in news_items]))
    mizutani_count = len([item for item in news_items if "M谷" in item.title])
    real_news = [item for item in news_items if "M谷" not in item.title]
    
    summary = f"本日収集した{len(news_items)}件のニュースをお届けします。"
    
    if real_news:
        topics = []
        for item in real_news[:3]:  # Use first 3 real news items
            if any(keyword in item.title for keyword in ['セブン', 'コンビニ', '小売']):
                topics.append("小売業界")
            elif any(keyword in item.title for keyword in ['マンション', '不動産']):
                topics.append("不動産市場")
            elif any(keyword in item.title for keyword in ['株価', '投資']):
                topics.append("株式市場")
            elif any(keyword in item.title for keyword in ['企業', '業績']):
                topics.append("企業業績")
            elif any(keyword in item.title for keyword in ['中国', '輸入', '水産物', '貿易']):
                topics.append("国際貿易")
            elif any(keyword in item.title for keyword in ['広島', '核', '平和']):
                topics.append("平和・核問題")
            elif any(keyword in item.title for keyword in ['相撲', 'スポーツ', '横綱']):
                topics.append("スポーツ")
            elif any(keyword in item.title for keyword in ['宗教', '僧侶', '社会']):
                topics.append("社会問題")
            else:
                topics.append("経済動向")
        
        if topics:
            unique_topics = list(set(topics))
            summary += f"主要トピックは{', '.join(unique_topics[:2])}などです。"
    
    if mizutani_count > 0:
        summary += f"また、注目の人物M谷氏の動向も含まれています。"
    
    summary += f"情報源は{', '.join(sources)}などの信頼できるメディアからお届けしています。"
    
    if len(summary) > 500:
        summary = summary[:497] + "..."
    
    return summary

@app.get("/api/news", response_model=NewsResponse)
async def get_news():
    """Get latest TOP6 news including Mizutani articles"""
    try:
        rss_news = fetch_rss_news()
        mizutani_article = generate_mizutani_article()
        
        selected_news = rss_news[:5] + [mizutani_article]
        
        if len(selected_news) < 6:
            remaining_rss = rss_news[5:6]
            selected_news.extend(remaining_rss)
        
        selected_news = selected_news[:6]
        
        overall_summary = generate_overall_summary(selected_news)
        
        return NewsResponse(
            success=True,
            data=selected_news,
            count=len(selected_news),
            generated_at=datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
            overall_summary=overall_summary
        )
        
    except Exception as e:
        return NewsResponse(
            success=False,
            data=[],
            count=0,
            generated_at=datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
            overall_summary="ニュースの取得中にエラーが発生しました。"
        )

@app.get("/healthz")
async def healthz():
    return {"status": "ok"}
